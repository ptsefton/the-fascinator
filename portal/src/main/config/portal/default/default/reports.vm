#set($pageTitle = "Harvest Log")
<script type="text/javascript" src="$portalPath/js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="$portalPath/js/jquery.tablesorter.min.js"></script> 
<script type="text/javascript">
<!--
	$(".tablesorter").addParser({
		id: 'lloyd',
		is: function(s) {
			return false;
		},
		format: function(s) {
			var d=s.substring(0,10);
			var t=s.substring(11,19);
			return new Date(d+t);
		},
		type: 'numeric'
	});

	$(document).ready(function() {
		$("#harvestTable").tablesorter({
			headers: {
				1: {
					sorter:'lloyd'
				}
			}
		});
	});
-->
</script>

<div class="grid_6">
  <div><h3> List of harvests </h3></div>
  #set($menuTitle = "Harvest logs")
  <div class="block">
    #if(!$self.latest)
      &nbsp;
    #else
      <table id="harvestTable" class="tablesorter" border="1">
      <thead>
      <tr>
      	<th>Source</th>
      	<th>Time</th>
      </tr>
      </thead>
      <tbody>
      #foreach($item in $self.latest)
        #set($harvestId = $item.getFirst('harvestId'))
        #set($repoType = $item.getFirst('repository_type'))
        #set($repoName = $item.getFirst('repository_name'))
        <tr>
          <td><a href="$portalPath/harvestreport/$harvestId">$repoType $repoName</a></td>
          <td><a href="$portalPath/harvestreport/$harvestId">$harvestId</a></td>
        </tr>
      #end
      </tbody>
      </table>
    #end
  </div>
</div>
